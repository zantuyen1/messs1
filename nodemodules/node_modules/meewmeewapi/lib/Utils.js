"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.isValidPath = exports.isValidFilename = exports.windowsReservedNameRegex = void 0;
const path_1 = __importDefault(require("path"));
function filenameReservedRegex() {
    return /[<>:"/\\|?*\u0000-\u001F]/g;
}
exports.default = filenameReservedRegex;
function windowsReservedNameRegex() {
    return /^(con|prn|aux|nul|com\d|lpt\d)$/i;
}
exports.windowsReservedNameRegex = windowsReservedNameRegex;
function isValidFilename(string) {
    if (!string || string.length > 255)
        return false;
    if (filenameReservedRegex().test(string) || windowsReservedNameRegex().test(string))
        return false;
    if (string === '.' || string === '..')
        return false;
    return true;
}
exports.isValidFilename = isValidFilename;
function isValidPath(string) {
    const parse = path_1.default.parse(string);
    if (!isValidFilename(parse.name))
        return false;
    return true;
}
exports.isValidPath = isValidPath;
